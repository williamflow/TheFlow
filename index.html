<html>
    <head>
        <script>
            function refresh() {
                var xhr = new XMLHttpRequest()
                xhr.onreadystatechange = function() {
                    if(xhr.readyState == 4 && xhr.status == 200) {
                        document.getElementById("connections").value = xhr.responseText
                    }
                }
                xhr.open("POST", "Commands.php", true)
                xhr.setRequestHeader('Content-Type', 'application/json')
                xhr.send(JSON.stringify({
                    cmd: "listconnections"
                }))
            }
            function connect() {
                var xhr = new XMLHttpRequest()
                xhr.onreadystatechange = function() {
                    if(xhr.readyState == 4 && xhr.status == 200) {
                        refresh()
                    }
                }
                xhr.open("POST", "Commands.php", true)
                xhr.setRequestHeader('Content-Type', 'application/json')
                xhr.send(JSON.stringify({
                    cmd: "connect",
                    nodeout: document.getElementById("nodeout").value,
                    nodein: document.getElementById("nodein").value
                }))
            }
            function disconnect() {
                var xhr = new XMLHttpRequest()
                xhr.onreadystatechange = function() {
                    if(xhr.readyState == 4 && xhr.status == 200) {
                        refresh()
                    }
                }
                xhr.open("POST", "Commands.php", true)
                xhr.setRequestHeader('Content-Type', 'application/json')
                xhr.send(JSON.stringify({
                    cmd: "disconnect",
                    nodeout: document.getElementById("nodeout").value,
                    nodein: document.getElementById("nodein").value
                }))
            }
        </script>
    </head>
    <body>
        <textarea id="connections"></textarea><br>
        <input value="Refresh" onclick="refresh()" type="button"><br>
        <input id="nodeout"><input id="nodein"><br>
        <input value="Connect" onclick="connect()" type="button"><input value="Disconnect" onclick="disconnect()" type="button"><br>
        <script>
            refresh()
        </script>
    </body>
</html>
